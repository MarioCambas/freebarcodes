# freebarcodes
API service for free barcodes
FREE BARCODES API MANUAL
Developed by MCHSoft 
 
https://mchsoft.com
                     http://mchsoft.com/demos/upc/api/


                                      



Version 0.2
 
Disclaimer: The codes generated by this system are not registered in GS1, and are recommended for internal use only. Use at your own risk.

url to API: https://mchsoft.com/demos/upc/api/api.php

All the queries have to be done through POST method.
Go to https://mchsoft.com/demos/upc/api for a more detailed and complete demo.
User manual https://mchsoft.com/demos/upc/api/freebarcodesapiV0.2.pdf

The system has to use modes, stand alone, and database.

STAND ALONE  mode:

You will only able to get the barcode image (base64 encode) from the code passed as Parametereter showing the label passed if any if not label passed it will show “FREE BARCODE”.
Note: to show the actual image for the code add the Parametereter show=true.

Example 1: only showing the image base64 encode
Parameters: code=184416660123, label=it is the label

Results:
Array
(
    [code] => 184416660123
    [label] => some label
    [barcode] => iVBORw0KGgoAAA...UVORK5CYII=
)

Example 2: Showing also the actual barcode image 
Parameters: code=184416660123, label=it is the label, show=true

results:

 
Array
(
    [code] => 184416660123
    [label] => some label
    [barcode] => iVBORw0KGgoAAA...UVORK5CYII=
)


DATABASE mode:
You can create a free account at https://mchsoft.com/demos/upc/upc.htm sign in button.

Login into the system for accessing to database functionality.
Default Parameters:
user=string (user name). Required for access to the database functionality.
pwd=string (password). Required for access to the database functionality.

Return an array holding the result of the login process or error occurred.
If all goes well and the login process is successful it will return the token.
You have to be verified that token every time you are accessing to the API in database mode.

Example: login into the system.
Parameters: user=<username>, pwd=<password>

results:
Array
(
    [responce] => ok
    [token] => <yourtoken>
    [logged] => 1
    [mode] => Data base
)

When you login into the system you get access to more complete functionality.
You will be able to:
1: Get your code’s list storage in the database.
2: Add new codes.
	2.1: Creating a new code just passing the label.
	2.2: Adding your own codes.
3: Edit the label of an existing code.
4: Delete an existing code.
5: Get the barcode image for a code.

1: Getting your code’s list storage in the database
Example: 
Parameters: user=<username>, pwd=<password>, codelist=true 
Optional Parameter imgbase64=true add the image in base64 code

results:
Array
(
    [0] => Array
        (
            [code] => 184410000017
            [label] => Label for
            [selected] => 
        )

    ....
	....

    [35] => Array
        (
            [code] => 184416660185
            [label] => demo new code
            [selected] => 
        )

)

If you add an extra Parameter “code” with the code it will returned as selected
Example: Returning a selected code 
Parameters: user=<username>, pwd=<password>, codelist=true, code=184410000017


results:
Array
(
    [0] => Array
        (
            [code] => 184410000017
            [label] => Label for
            [selected] => selected
        )

    ....
	....

    [35] => Array
        (
            [code] => 184416660185
            [label] => demo new code
            [selected] => 
        )

)


2: Adding codes
2.1: Creating a new code just passing the label.
Example: 
Parameters: user=<username>, pwd=<password>, newcode=true, label= this is an added code without code
Note: Additionally you can request for get back the new code’s list just adding the Parameter codelist=true
 

results:
Array
(
    [newcode] => 184416660208
)

2.2: Adding your own codes.
Example:
Parameters: user=<username>, pwd=<password>, addcode=true, label= this is my own new code, code=184416660239
 
results:
Array
(
    [0] => Array
        (
            [code] => 184410000017
            [label] => Label for 184410000017
            [selected] => 
        )

    ...
	...
	
    [40] => Array
        (
            [code] => 184416660239
            [label] => this is my own new code
            [selected] => selected
        )
)

If the code you’re trying to add already exist will show an error message

results:
Array
(
    [error] => Error, code '184416660239' already exist
)

If the code you’re trying to add doesn’t pass the bit verification an error message 

results:
Array
(
    [error] => Error, code '125213235212' didn't pass the bit verification test
)


3: Edit the label of an existing code.
Example: 
Parameters: user=<username>, pwd=<password>, editcode=true, label= this the new label, code=184416660239

results:
Array
(
    [0] => Array
        (
            [code] => 184410000017
            [label] => New label edited
            [selected] => 
        )

	...
	...
	
    [40] => Array
        (
            [code] => 184416660239
            [label] => this is the new label
            [selected] => selected
        )

)




4: Delete an existing code.
Example: 
Parameters: user=<username>, pwd=<password>, deletecode=true, code=184416660239

results: It’ll return the code’s list without the deleted code
Array
(
    [0] => Array
        (
            [code] => 184410000017
            [label] => New label edited
            [selected] => 
        )

	...
	...
	
    [40] => Array
        (
            [code] => 184416660246
            [label] => this is an added code without code
            [selected] => 
        )

    [afectedRows] => 1

)

5: Get the barcode image for a code.
It’ll return the barcode image (base64 encode) from the code passed as Parametereter. 
Note: to show the actual image for the code add the Parametereter show=true.

Example 1: 
Parameters: user=<username>, pwd=<password>, drawcode=true, code=184416660246

results: 
Array
(
    [code] => 184416660246
    [label] => this is an added code without code
    [barcode] => iVBORw0KGgoAAAANSUhEUgAAAOYAA....FTkSuQmCC
)

Example 2: Showing also the actual barcode image
Parameters: user=<username>, pwd=<password>, drawcode=true, code=184416660246, show=true

results: 

 


Array
(
    [code] => 184416660246
    [label] => this is an added code without code
    [barcode] => iVBORw0KGgoAAAANSUhEUgAAAOYAA....FTkSuQmCC
)

If the code you’re trying to draw doesn’t exist will show an error message

results:
Array
(
    [error] => Error, code '184416660239' doesn't exist
)

Code examples:
PHP
You should add the extra parameter method=php to get the correct data format for php otherwise it will return by default a javascript’s array string.

function make_curl(){
    $curl = curl_init();
    $request='https://mchsoft.com/demos/upc/api/api.php';
    $post=array('code'=>'184416660123','label'=>'this label','show'=>'true','method'=>'php');
    $defaults = array(
        CURLOPT_POST => 1,
        CURLOPT_HEADER => 0,
        CURLOPT_URL => $request,
        CURLOPT_FRESH_CONNECT => 1,
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_FORBID_REUSE => 1,
        CURLOPT_TIMEOUT => 30,
        CURLOPT_POSTFIELDS => http_build_query($post)
    );
    curl_setopt_array($curl, $defaults);
    try {
        if( !$resp = curl_exec($curl)){
            throw new Exception(curl_error($curl)." Error No: ".curl_errno($curl));
        }
    } catch (Exception $e) {
        return ('Caught exception in curl: '.  $e->getMessage());
    }
    curl_close($curl);
    return $resp;
}

$response = json_decode(make_curl());
foreach($response as $k=>$v){
    if ($k=='codelist'){
        for($i=0;$i<count($v);$i++){
            foreach($v[$i] as $k1=>$v1){
                echo '['.$k1.']="'.$v1.'"<br>';
            }
        }
    }else{echo '['.$k.']="'.$v.'"<br>';}
}
 
JAVASCRIPT + JQUERY

function stringfy(arraystr){
	var str=arraystr.replace(/},{/g,'<br><br>');
	str=str.replace(/,/g,'<br>');
	str=str.replace(/}]/g,'<br>');
	str=str.replace('[','<br>');
	str=str.replace(/{/g,'<br>');
	str=str.replace(/}/g,'<br>');
	return str;
}
(function(){
   params={'code':'184416660123','label':'the label','show':'true'};
   $.ajax({type:"POST",url:"https://mchsoft.com/demos/upc/api/api.php?",data:params, success: function(results){
	var result=JSON.parse(results);
	if(typeof result['barcodeimg']!='undefined'){
var img=result['barcodeimg']+"<br>";                $("#displayresult1").html("code="+result['code']+"<br>label="+result['label']+"<br>barcode (base64)="+result['barcodebase64']+"<br>image="+result['barcodeimg']);
	}else{
		$("#displayresult1").html(stringfy(results));
	}
   }});
 })();
